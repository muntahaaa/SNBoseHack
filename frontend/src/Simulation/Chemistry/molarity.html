<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Molarity Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f5f5f5;
        }
        
        .container {
            display: flex;
            flex: 1;
        }
        
        .left-panel {
            flex: 1;
            padding: 20px;
            background-color: #fff;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .right-panel {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #fff;
        }
        
        .bottom-panel {
            padding: 20px;
            background-color: #f0f0f0;
            border-top: 1px solid #ddd;
            text-align: center;
        }
        
        .control-group {
            margin-bottom: 30px;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .slider-container label {
            width: 120px;
            font-weight: bold;
        }
        
        .slider {
            flex: 1;
            margin: 0 15px;
        }
        
        .value-display {
            width: 100px;
            text-align: right;
            font-weight: bold;
        }
        
        .solute-btn {
            margin: 5px;
            padding: 10px 15px;
            background-color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .solute-btn:hover {
            background-color: #d0d0d0;
        }
        
        .solute-btn.active {
            background-color: #4CAF50;
            color: white;
        }
        
        .beaker-container {
            position: relative;
            width: 200px;
            height: 300px;
        }
        
        .beaker {
            position: absolute;
            bottom: 0;
            width: 200px;
            height: 300px;
            border: 5px solid #999;
            border-top: none;
            border-radius: 0 0 20px 20px;
            overflow: hidden;
            background-color: transparent;
        }
        
        .liquid {
            position: absolute;
            bottom: 0;
            width: 103%;
            height: 0;
            border-radius: 0 0 20px 20px;
            transition: height 0.5s, background-color 0.5s;
        }
        
        .molarity-display {
            margin-top: 20px;
            padding: 15px;
            border: 2px solid #333;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            background-color: #f9f9f9;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        
        .measurements {
            margin-top: 10px;
            font-size: 16px;
            color: #555;
        }
    </style>
</head>
<body>
    <h1>AR Molarity Calculator</h1>
    
    <div class="container">
        <div class="left-panel">
            <div class="control-group">
                <div class="slider-container">
                    <label for="volume-slider">Solution Volume:</label>
                    <input type="range" id="volume-slider" class="slider" min="50" max="1000" step="10" value="500">
                    <span id="volume-display" class="value-display">500 mL</span>
                </div>
                
                <div class="slider-container">
                    <label for="weight-slider">Solute Weight:</label>
                    <input type="range" id="weight-slider" class="slider" min="1" max="50" step="1" value="10">
                    <span id="weight-display" class="value-display">10 g</span>
                </div>
            </div>
            
            <div class="measurements">
                <p id="solute-info">Selected Solute: NaOH (Molar Mass: 40.00 g/mol)</p>
                <p id="solution-info">10g NaOH in 500mL water</p>
            </div>
            
            <div class="molarity-display" id="molarity-result">
                Molarity: 0.50 mol/L
            </div>
        </div>
        
        <div class="right-panel">
            <div class="beaker-container">
                <div class="beaker"></div>
                <div class="liquid" id="liquid"></div>
            </div>
        </div>
    </div>
    
    <div class="bottom-panel">
        <h3>Select a Solute:</h3>
        <button class="solute-btn active" data-solute="NaOH" data-color="#3498db" data-mm="40.00">NaOH</button>
        <button class="solute-btn" data-solute="HCl" data-color="#fcff9b" data-mm="36.46">HCl</button>
        <button class="solute-btn" data-solute="NaCl" data-color="#3498db" data-mm="58.44">NaCl</button>
        <button class="solute-btn" data-solute="CuSO₄" data-color="#264ef8" data-mm="159.60">CuSO₄</button>
        <button class="solute-btn" data-solute="KMnO₄" data-color="#de3af5" data-mm="158.03">KMnO₄</button>
    </div>

    <script>
        // DOM elements
        const volumeSlider = document.getElementById('volume-slider');
        const weightSlider = document.getElementById('weight-slider');
        const volumeDisplay = document.getElementById('volume-display');
        const weightDisplay = document.getElementById('weight-display');
        const soluteInfo = document.getElementById('solute-info');
        const solutionInfo = document.getElementById('solution-info');
        const molarityResult = document.getElementById('molarity-result');
        const liquid = document.getElementById('liquid');
        const soluteBtns = document.querySelectorAll('.solute-btn');
        
        // Initial state
        let currentSolute = {
            name: 'NaOH',
            molarMass: 40.00,
            color: '#9be8ff'
        };
        
        let volume = 500; // mL
        let weight = 10;  // g
        
        // Update functions
        function updateLiquid() {
            // Calculate height based on volume (max height is 280px at 1000mL)
            const height = (volume / 1000) * 280;
            liquid.style.height = `${height}px`;
            
            // Calculate opacity based on concentration (weight/volume)
            const concentration = weight / volume;
            const maxConcentration = 50 / 50; // 50g in 50mL
            
            // Map concentration to opacity between 0.2 and 0.9
            const opacity = 0.2 + (concentration / maxConcentration) * 0.7;
            liquid.style.backgroundColor = hexToRgba(currentSolute.color, Math.min(opacity, 0.9));
            
            // Update the measurements display
            solutionInfo.textContent = `${weight}g ${currentSolute.name} in ${volume}mL water`;
        }
        
        function calculateMolarity() {
            // Molarity = moles of solute / volume of solution in liters
            const moles = weight / currentSolute.molarMass;
            const volumeInLiters = volume / 1000;
            const molarity = moles / volumeInLiters;
            
            molarityResult.textContent = `Molarity: ${molarity.toFixed(2)} mol/L`;
        }
        
        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
        
        // Event listeners
        volumeSlider.addEventListener('input', function() {
            volume = parseInt(this.value);
            volumeDisplay.textContent = `${volume} mL`;
            updateLiquid();
            calculateMolarity();
        });
        
        weightSlider.addEventListener('input', function() {
            weight = parseInt(this.value);
            weightDisplay.textContent = `${weight} g`;
            updateLiquid();
            calculateMolarity();
        });
        
        soluteBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                soluteBtns.forEach(b => b.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Update current solute
                currentSolute = {
                    name: this.dataset.solute,
                    molarMass: parseFloat(this.dataset.mm),
                    color: this.dataset.color
                };
                
                // Update solute info display
                soluteInfo.textContent = `Selected Solute: ${currentSolute.name} (Molar Mass: ${currentSolute.molarMass.toFixed(2)} g/mol)`;
                
                // Update liquid color and calculation
                updateLiquid();
                calculateMolarity();
            });
        });
        
        // Initialize the visualization
        updateLiquid();
        calculateMolarity();
    </script>
</body>
</html>